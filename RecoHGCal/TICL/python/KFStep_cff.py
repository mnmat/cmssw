import FWCore.ParameterSet.Config as cms

from RecoHGCal.TICL.TICLSeedingRegions_cff import ticlSeedingTrk
from RecoHGCal.TICL.trackstersProducer_cfi import trackstersProducer as _trackstersProducer
from RecoHGCal.TICL.filteredLayerClustersProducer_cfi import filteredLayerClustersProducer as _filteredLayerClustersProducer
from RecoHGCal.TICL.multiClustersFromTrackstersProducer_cfi import multiClustersFromTrackstersProducer as _multiClustersFromTrackstersProducer
from RecoHGCal.TICL.ticlLayerTileProducer_cfi import ticlLayerTileProducer

# CLUSTER FILTERING/MASKING

filteredLayerClustersKF = _filteredLayerClustersProducer.clone(
    clusterFilter = "ClusterFilterByAlgoAndSize",
    min_cluster_size = 2, # inclusive
    algo_number = 8,
    iteration_label = "KF",
)

# PATTERN RECOGNITION

ticlTrackstersKF = _trackstersProducer.clone(
    filtered_mask = "filteredLayerClustersKF:KF",
    layer_clusters_tiles = "ticlRecHitTile:Test",
    seeding_regions = "ticlSeedingTrk",
    itername = "KF",
    patternRecognitionBy = "KF",
    pluginPatternRecognitionByKF = dict (
        test = 3,
        radlen = [0.287578231425533, 0.652574432663379, 0.519126219884760, 0.629329696701607, 0.470164608944423,
            0.656926010668083, 0.505405478217971, 0.645561815316222, 0.476905911172138, 0.657129361462176,
            0.494426335907814, 0.661767816723196, 0.476697696751714, 0.656792486637129, 0.488911438964815,
            0.659428797546396, 0.519388799886432, 0.636443052965693, 0.690440833716593, 0.656083145894548,
            0.710648981189018, 0.654738292372854, 0.711716272998115, 0.659031423898539, 0.708941939031308,
            0.661965595922196, 2.868636061036860, 2.988866189877523, 2.989715911253076, 2.991436303780332,
            2.989599621564430, 3.002821764306962, 2.990356629240060, 2.989573639239810, 2.988685711688429,
            2.989414475081340, 2.990114765024607, 4.164871621966520, 4.144585482635521, 4.058009456314032,
            4.137460795188776, 4.138177409380636, 4.129951519389949, 4.060009792683141, 4.133359022913795,
            4.134560408406477, 4.13575162757734],
        xi = [0.0005110512059408830, 0.0006831878206769110, 0.0004973065046027600, 0.0007055116075429950, 0.0004840811987581450,
            0.0006815847792258840, 0.000498840698299919, 0.0006929527987818480, 0.0004884872008263560, 0.0006792860873528980,
            0.0005021346124779450, 0.0006831033295305010, 0.0004904917404416280, 0.0006787315453395390,0.0005011512213829390,
            0.0006806752816281460, 0.0004986591763045000, 0.0007028556604867630, 0.0004469247382095310, 0.0006784016152473840,
            0.0004576588817242630, 0.0006788591171105650, 0.00045805568196347000, 0.0006806926713052890, 0.00045644714532507900,
            0.0006829423776194960, 0.0010145335633696400, 0.0009952585774521000, 0.00099472493124547, 0.00099461390470062,
            0.000994829170470436, 0.0009973866163567710, 0.000994978298107381,0.0009940245879949960, 0.0009951150189777040,
            0.0009946645572410690, 0.0009948166566158740, 0.0010016131009442000, 0.0009996724454001690, 0.0009927229142128690,
            0.0009989274416790460, 0.000998695705935224, 0.0009987097209326370, 0.0009919024127419550, 0.000998719611624487,
            0.0009972693538724180, 0.0009976091170762653]
    )
)

ticlKFStepTask = cms.Task(ticlSeedingTrk
    ,filteredLayerClustersKF
    ,ticlTrackstersKF)
